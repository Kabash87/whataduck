"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[533],{3965:function(e,t,r){var n=r(1243);n.Z.defaults.withCredentials=!0;var a=n.Z.create({baseURL:"http://localhost:4000"});a.interceptors.response.use((function(e){return e.data&&e.data.results?e.data.results:e.data})),t.Z=a},5945:function(e,t,r){r.d(t,{Z:function(){return S}});var n,a,o,s,i,c,l,d,u,f=r(7022),p=r(2932),m=r(9532),h=r(2677),x=r(3360),g=r(2791),v=["title","titleId"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function Z(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function b(e,t){var r=e.title,f=e.titleId,p=Z(e,v);return g.createElement("svg",j({height:64,preserveAspectRatio:"none",viewBox:"0 0 64 64",width:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":f},p),r?g.createElement("title",{id:f},r):null,n||(n=g.createElement("radialGradient",{id:"a",cx:33.324192,cy:22.625,gradientUnits:"userSpaceOnUse",r:42.05378},g.createElement("stop",{offset:.5265487,stopColor:"#fff"}),g.createElement("stop",{offset:1,stopColor:"#d9b98b"}))),a||(a=g.createElement("radialGradient",{id:"b",cx:15.477564,cy:30.663462,gradientTransform:"matrix(.8658794 .5002529 -1.1417177 1.97618 37.084877 -37.675751)",gradientUnits:"userSpaceOnUse",r:14.089451},g.createElement("stop",{offset:.4508043,stopColor:"#f8eb00"}),g.createElement("stop",{offset:1,stopColor:"#f5b32c"}))),o||(o=g.createElement("linearGradient",{id:"c",gradientUnits:"userSpaceOnUse",x1:40.512749,x2:40.512749,y1:16.664583,y2:19.081249},g.createElement("stop",{offset:0,stopColor:"#fff"}),g.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:.3}))),s||(s=g.createElement("path",{d:"m34.9492188 63c-11.7133789 0-12.0136719-5.6152344-12.2543945-10.1259766-.1166992-2.1767578-.2172852-4.0625-1.4262695-5.2587891-1.3496094.1279297-2.7939453.1923828-4.3007813.1923828-7 0-15.7114258 0-15.7114258-5.5576172 0-3.9228516 2.4716797-5.7158203 4.8618164-7.4501953 1.8388672-1.3349609 3.7402344-2.7143555 5.0649414-5.1772461 1.4414063-2.6782227 2.2963867-4.2680664 3.2836914-5.2304688 1.9399414-16.0761717 7.8930664-22.6420897 20.4824219-22.6420897 17.3339844 0 20.5878906 9.4838867 23.2021484 17.1040039.2089844.6083984.4140625 1.206543.6230469 1.7895508 4.9628906 13.8369141 4.9628906 16.9277344 4.9628906 21.6064453 0 9.8144531-11.8232422 20.75-28.7880859 20.75zm-12.9516602-17.4726562.5537109.546875c1.8759766 1.7431641 2.0102539 4.2597656 2.140625 6.6923828.2358399 4.4179687.4399414 8.2333984 10.2573243 8.2333984 15.3320313 0 26.7880859-9.8994141 26.7880859-18.75 0-4.4697266 0-7.421875-4.8457031-20.9316406-.2119141-.5913086-.4199219-1.1982422-.6318359-1.8149414-2.5332032-7.3842774-5.4042969-15.753418-21.3105469-15.753418-11.5717773 0-16.7700195 5.9575195-18.5405273 21.2490234l-.0463867.402832-.3139648.2563477c-.8227539.671875-1.6811523 2.2680664-3.1035156 4.9116211-1.5419922 2.8657227-3.7255859 4.4506836-5.6523438 5.8481445-2.3432618 1.7011719-4.0361329 2.9296876-4.0361329 5.8320313 0 3.5576172 7.9248047 3.5576172 13.7114258 3.5576172 1.6147461 0 3.1503906-.0771484 4.5639648-.2294922z",fill:"#3e3a39"})),i||(i=g.createElement("path",{d:"m34.948719 2.75c17.9807663 0 20.1009636 10.4692993 22.884613 18.2307701 4.9038468 13.6730766 4.9038468 16.7115364 4.9038468 21.2692299 0 9.1153831-11.4423065 19.75-27.7884598 19.75s-8.4535332-10.8952751-13.0769234-15.1923065c-4.9038467-4.5576935-7.4143609-13.1285248-6.5384626-21.2692318 1.6346159-15.1923075 6.5384627-22.7884617 19.615386-22.7884617z",fill:"url(#a)"})),c||(c=g.createElement("path",{d:"m20.2371788 24.0192299c6.5384617 0 6.5384617 0 9.8076935 6.0769234s4.9038467 3.0384636 4.9038467 6.0769234c0 1.5192299 0 10.6346169-17.9807701 10.6346169-6.5384617 0-14.7115383 0-14.7115383-4.5576935 0-6.0769234 6.5384607-6.0769234 9.8076916-12.1538467s3.2692308-6.0769235 8.1730766-6.0769235z",fill:"url(#b)"})),l||(l=g.createElement("ellipse",{cx:24.578838,cy:30.757862,fill:"#804f21",rx:.521862,ry:1.625,transform:"matrix(.7322221 .6810659 -.6810659 .7322221 27.529799 -8.503533)"})),d||(d=g.createElement("ellipse",{cx:41.375,cy:19.5,fill:"#231815",rx:3.125,ry:3.75})),u||(u=g.createElement("ellipse",{cx:40.512749,cy:17.872917,fill:"url(#c)",rx:1.217624,ry:1.208333})))}var y=g.forwardRef(b),E=(r.p,r(7689)),C=r(1087),w=r(7297),k=r(184);var I=function(){var e=(0,w.a)(),t=e.isLogged,r=e.setIsLogged,n=(0,E.s0)();return(0,g.useEffect)((function(){var e=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");r(!(!e||!t))};return window.addEventListener("storage",e),e(),function(){return window.removeEventListener("storage",e)}}),[r]),(0,k.jsx)(p.Z,{bg:"dark","data-bs-theme":"dark",expand:"lg",children:(0,k.jsxs)(f.Z,{children:[(0,k.jsxs)(p.Z.Brand,{href:"/",children:[(0,k.jsx)(y,{}),(0,k.jsx)("h1",{className:"caveat-font",children:"What a Duck!"})]}),(0,k.jsx)(p.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,k.jsxs)(p.Z.Collapse,{id:"basic-navbar-nav",children:[(0,k.jsxs)(m.Z,{className:"me-auto",children:[(0,k.jsx)(m.Z.Link,{href:"/about-us",children:"Quienes somos"}),(0,k.jsx)(m.Z.Link,{href:"/adverts",children:"Anuncios"})]}),(0,k.jsx)(h.Z,{xs:"auto",className:"ms-auto",children:t?(0,k.jsx)(x.Z,{variant:"secondary",onClick:function(e,t){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("isVerified"),localStorage.removeItem("emailToken"),r(!1),n("/")},style:{marginBottom:"5px"},children:"Logout"}):(0,k.jsx)(C.rU,{to:"/login",children:(0,k.jsx)(x.Z,{variant:"secondary",children:"Registrarte o Iniciar sesi\xf3n"})})})]})]})})},S=function(e){var t=e.title,r=e.children;return(0,k.jsxs)("div",{className:"d-flex flex-column",style:{minHeight:"100vh"},children:[(0,k.jsx)(I,{}),(0,k.jsxs)(f.Z,{className:"flex-fill",children:[(0,k.jsx)("h2",{className:"my-5",children:t}),r]}),(0,k.jsx)("footer",{className:"text-center py-3 bg-light",children:"\xa9 2023 Mighty Ducks Keepcoding Team"})]})}},470:function(e,t,r){var n=r(2791),a=r(7689),o=r(4849),s=r(184);t.Z=function(e){var t=e.delay,r=void 0===t?2e3:t,i=(0,a.s0)();return(0,n.useEffect)((function(){var e=setTimeout((function(){i("/")}),r);return function(){return clearTimeout(e)}}),[i,r]),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(o.Z,{animation:"border",role:"status"})})}},6533:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(9439),a=r(2791),o=r(7022),s=r(9743),i=r(2677),c=r(7689),l=r(5945),d=r(470),u=r(1413),f=r(3855),p=r(3360),m=r(184);var h=function(e){var t=e.adData,r=e.setAdData,n=e.handleInputChange,a=e.handleSubmit,o=e.formErrors;return(0,m.jsxs)(f.Z,{onSubmit:a,encType:"multipart/form-data",children:[(0,m.jsxs)(f.Z.Group,{controlId:"formName",children:[(0,m.jsx)(f.Z.Label,{children:"T\xedtulo"}),(0,m.jsx)(f.Z.Control,{type:"text",name:"name",placeholder:"Escribe el t\xedtulo",value:t.name,onChange:n}),o.name&&(0,m.jsx)(f.Z.Text,{className:"text-danger",children:o.name})]}),(0,m.jsxs)(f.Z.Group,{controlId:"formPrice",children:[(0,m.jsx)(f.Z.Label,{children:"Price"}),(0,m.jsx)(f.Z.Control,{type:"number",name:"price",placeholder:"Escribe el precio",value:t.price,onChange:n}),o.price&&(0,m.jsx)(f.Z.Text,{className:"text-danger",children:o.price})]}),(0,m.jsxs)(f.Z.Group,{controlId:"formDescription",children:[(0,m.jsx)(f.Z.Label,{children:"Descripci\xf3n"}),(0,m.jsx)(f.Z.Control,{as:"textarea",rows:3,name:"description",placeholder:"Escribe la descripci\xf3n",value:t.description,onChange:n}),o.description&&(0,m.jsx)(f.Z.Text,{className:"text-danger",children:o.description})]}),(0,m.jsxs)(f.Z.Group,{controlId:"formType",children:[(0,m.jsx)(f.Z.Label,{children:"Tipo"}),(0,m.jsxs)(f.Z.Control,{as:"select",name:"type",value:t.type,onChange:n,children:[(0,m.jsx)("option",{value:"compra",children:"Compra"}),(0,m.jsx)("option",{value:"venta",children:"Venta"})]})]}),(0,m.jsxs)(f.Z.Group,{controlId:"formTags",children:[(0,m.jsx)(f.Z.Label,{children:"Etiquetas (separadas por comas)"}),(0,m.jsx)(f.Z.Control,{type:"text",name:"tags",placeholder:"Ejemplo: etiqueta1, etiqueta2",value:t.tags.join(", "),onChange:function(e){return r((0,u.Z)((0,u.Z)({},t),{},{tags:e.target.value.split(", ")}))}}),o.tags&&(0,m.jsx)(f.Z.Text,{className:"text-danger",children:o.tags})]}),(0,m.jsx)(p.Z,{variant:"dark",type:"submit",style:{marginTop:"20px"},children:"Guardar Cambios"})]})},x=r(5316);var g=function(e){var t=e.showModal,r=e.handleConfirm,n=e.handleCancel;return(0,m.jsxs)(x.Z,{show:t,onHide:n,children:[(0,m.jsx)(x.Z.Header,{closeButton:!0,children:(0,m.jsx)(x.Z.Title,{children:"Confirmar"})}),(0,m.jsx)(x.Z.Body,{children:"\xbfEst\xe1s seguro de que deseas guardar los cambios?"}),(0,m.jsxs)(x.Z.Footer,{children:[(0,m.jsx)(p.Z,{variant:"secondary",onClick:n,children:"Cancelar"}),(0,m.jsx)(p.Z,{variant:"dark",onClick:r,children:"Aceptar"})]})]})},v=r(2469);var j=function(e){var t=e.variant,r=e.message;return r?(0,m.jsx)(v.Z,{variant:t,children:r}):null},Z=r(7051);var b=r(4942);var y=function(){var e=(0,c.UO)().id,t=function(e){var t=(0,a.useState)({name:"",price:"",description:"",type:"",tags:[],photo:""}),r=(0,n.Z)(t,2),o=r[0],s=r[1],i=(0,a.useState)(""),c=(0,n.Z)(i,2),l=c[0],d=c[1];return(0,a.useEffect)((function(){(0,Z.K4)(e).then((function(e){s((function(t){return(0,u.Z)((0,u.Z)({},t),e)}))})).catch((function(e){d("Error al obtener los datos del anuncio. Por favor, int\xe9ntalo de nuevo.")}))}),[e]),{adData:o,setAdData:s,errorMessage:l}}(e),r=t.adData,f=t.setAdData,p=t.errorMessage,x=function(e){var t=(0,a.useState)(e||{}),r=(0,n.Z)(t,2),o=r[0],s=r[1],i=(0,a.useState)({}),c=(0,n.Z)(i,2),l=c[0],d=c[1];return(0,a.useEffect)((function(){s(e)}),[e]),{data:o,handleInputChange:function(e){var t=e.target,r=t.name,n=t.value;s((function(e){return(0,u.Z)((0,u.Z)({},e),{},(0,b.Z)({},r,n))}))},formErrors:l,validateForm:function(e){var t={};return e.name||(t.name="El t\xedtulo es obligatorio"),e.price||(t.price="El precio es obligatorio"),e.description||(t.description="La descripci\xf3n es obligatoria"),e.tags||(t.tags="Al menos una etiqueta es obligatoria"),d(t),0===Object.keys(t).length}}}(r),v=x.data,y=x.handleInputChange,E=x.formErrors,C=x.validateForm,w=function(e,t){var r=(0,a.useState)(""),o=(0,n.Z)(r,2),s=o[0],i=o[1],c=(0,a.useState)(""),l=(0,n.Z)(c,2),d=l[0],u=l[1],f=(0,a.useState)(!1),p=(0,n.Z)(f,2),m=p[0],h=p[1];return{successMessage:s,errorMessage:d,handleEdit:function(){(0,Z.vk)(e,t).then((function(){i("Anuncio editado con \xe9xito"),u(""),setTimeout((function(){h(!0)}),2e3)})).catch((function(){u("Error al editar el anuncio. Por favor, int\xe9ntalo de nuevo."),i("")}))},redirectToHome:m}}(e,v),k=w.successMessage,I=w.errorMessage,S=w.handleEdit,T=w.redirectToHome,O=(0,a.useState)(!1),D=(0,n.Z)(O,2),L=D[0],N=D[1];return(0,m.jsx)(l.Z,{title:"Editar Anuncio",children:(0,m.jsx)(o.Z,{className:"mb-5",children:(0,m.jsx)(s.Z,{className:"justify-content-md-center",children:(0,m.jsx)(i.Z,{md:"6",children:T?(0,m.jsx)(d.Z,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(g,{showModal:L,handleConfirm:function(){N(!1),S()},handleCancel:function(){N(!1)}}),(0,m.jsx)(j,{variant:"success",message:k}),(0,m.jsx)(j,{variant:"danger",message:I||p}),(0,m.jsx)(h,{adData:v,setAdData:f,handleInputChange:y,handleSubmit:function(e){e.preventDefault(),C(v)&&N(!0)},formErrors:E})]})})})})})}},7051:function(e,t,r){r.d(t,{K4:function(){return s},K5:function(){return l},VO:function(){return o},Vl:function(){return i},vk:function(){return c}});var n=r(3965),a="/api/adverts",o=function(){return n.Z.get(a)},s=function(e){var t="".concat(a,"/").concat(e);return n.Z.get(t)},i=function(e,t){var r=new FormData;return r.append("name",e.name),r.append("price",e.price),r.append("description",e.description),r.append("type",e.type),r.append("tags",e.tags),r.append("photo",e.photo),r.append("username",e.username),r.append("senderEmail",e.senderEmail),n.Z.post("".concat(a,"/create-advert"),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)},withCredentials:!0})},c=function(e,t){var r="".concat(a,"/edit/").concat(e);return n.Z.put(r,t)},l=function(e){var t="".concat(a,"/").concat(e);return n.Z.delete(t)}}}]);
//# sourceMappingURL=533.da67f4b2.chunk.js.map