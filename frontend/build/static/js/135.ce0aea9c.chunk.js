"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[135],{3965:function(e,t,r){var n=r(1243);n.Z.defaults.withCredentials=!0;var a=n.Z.create({baseURL:"https://whataduck-backend.onrender.com"});a.interceptors.response.use((function(e){return e.data&&e.data.results?e.data.results:e.data})),t.Z=a},5945:function(e,t,r){r.d(t,{Z:function(){return S}});var n,a,s,o,i,c,l,u,d,p=r(7022),f=r(2932),m=r(9532),h=r(2677),x=r(3360),g=r(2791),v=["title","titleId"];function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z.apply(this,arguments)}function j(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y(e,t){var r=e.title,p=e.titleId,f=j(e,v);return g.createElement("svg",Z({height:64,preserveAspectRatio:"none",viewBox:"0 0 64 64",width:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":p},f),r?g.createElement("title",{id:p},r):null,n||(n=g.createElement("radialGradient",{id:"a",cx:33.324192,cy:22.625,gradientUnits:"userSpaceOnUse",r:42.05378},g.createElement("stop",{offset:.5265487,stopColor:"#fff"}),g.createElement("stop",{offset:1,stopColor:"#d9b98b"}))),a||(a=g.createElement("radialGradient",{id:"b",cx:15.477564,cy:30.663462,gradientTransform:"matrix(.8658794 .5002529 -1.1417177 1.97618 37.084877 -37.675751)",gradientUnits:"userSpaceOnUse",r:14.089451},g.createElement("stop",{offset:.4508043,stopColor:"#f8eb00"}),g.createElement("stop",{offset:1,stopColor:"#f5b32c"}))),s||(s=g.createElement("linearGradient",{id:"c",gradientUnits:"userSpaceOnUse",x1:40.512749,x2:40.512749,y1:16.664583,y2:19.081249},g.createElement("stop",{offset:0,stopColor:"#fff"}),g.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:.3}))),o||(o=g.createElement("path",{d:"m34.9492188 63c-11.7133789 0-12.0136719-5.6152344-12.2543945-10.1259766-.1166992-2.1767578-.2172852-4.0625-1.4262695-5.2587891-1.3496094.1279297-2.7939453.1923828-4.3007813.1923828-7 0-15.7114258 0-15.7114258-5.5576172 0-3.9228516 2.4716797-5.7158203 4.8618164-7.4501953 1.8388672-1.3349609 3.7402344-2.7143555 5.0649414-5.1772461 1.4414063-2.6782227 2.2963867-4.2680664 3.2836914-5.2304688 1.9399414-16.0761717 7.8930664-22.6420897 20.4824219-22.6420897 17.3339844 0 20.5878906 9.4838867 23.2021484 17.1040039.2089844.6083984.4140625 1.206543.6230469 1.7895508 4.9628906 13.8369141 4.9628906 16.9277344 4.9628906 21.6064453 0 9.8144531-11.8232422 20.75-28.7880859 20.75zm-12.9516602-17.4726562.5537109.546875c1.8759766 1.7431641 2.0102539 4.2597656 2.140625 6.6923828.2358399 4.4179687.4399414 8.2333984 10.2573243 8.2333984 15.3320313 0 26.7880859-9.8994141 26.7880859-18.75 0-4.4697266 0-7.421875-4.8457031-20.9316406-.2119141-.5913086-.4199219-1.1982422-.6318359-1.8149414-2.5332032-7.3842774-5.4042969-15.753418-21.3105469-15.753418-11.5717773 0-16.7700195 5.9575195-18.5405273 21.2490234l-.0463867.402832-.3139648.2563477c-.8227539.671875-1.6811523 2.2680664-3.1035156 4.9116211-1.5419922 2.8657227-3.7255859 4.4506836-5.6523438 5.8481445-2.3432618 1.7011719-4.0361329 2.9296876-4.0361329 5.8320313 0 3.5576172 7.9248047 3.5576172 13.7114258 3.5576172 1.6147461 0 3.1503906-.0771484 4.5639648-.2294922z",fill:"#3e3a39"})),i||(i=g.createElement("path",{d:"m34.948719 2.75c17.9807663 0 20.1009636 10.4692993 22.884613 18.2307701 4.9038468 13.6730766 4.9038468 16.7115364 4.9038468 21.2692299 0 9.1153831-11.4423065 19.75-27.7884598 19.75s-8.4535332-10.8952751-13.0769234-15.1923065c-4.9038467-4.5576935-7.4143609-13.1285248-6.5384626-21.2692318 1.6346159-15.1923075 6.5384627-22.7884617 19.615386-22.7884617z",fill:"url(#a)"})),c||(c=g.createElement("path",{d:"m20.2371788 24.0192299c6.5384617 0 6.5384617 0 9.8076935 6.0769234s4.9038467 3.0384636 4.9038467 6.0769234c0 1.5192299 0 10.6346169-17.9807701 10.6346169-6.5384617 0-14.7115383 0-14.7115383-4.5576935 0-6.0769234 6.5384607-6.0769234 9.8076916-12.1538467s3.2692308-6.0769235 8.1730766-6.0769235z",fill:"url(#b)"})),l||(l=g.createElement("ellipse",{cx:24.578838,cy:30.757862,fill:"#804f21",rx:.521862,ry:1.625,transform:"matrix(.7322221 .6810659 -.6810659 .7322221 27.529799 -8.503533)"})),u||(u=g.createElement("ellipse",{cx:41.375,cy:19.5,fill:"#231815",rx:3.125,ry:3.75})),d||(d=g.createElement("ellipse",{cx:40.512749,cy:17.872917,fill:"url(#c)",rx:1.217624,ry:1.208333})))}var b=g.forwardRef(y),E=(r.p,r(7689)),C=r(1087),w=r(7297),k=r(184);var T=function(){var e=(0,w.a)(),t=e.isLogged,r=e.setIsLogged,n=(0,E.s0)();return(0,g.useEffect)((function(){var e=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");r(!(!e||!t))};return window.addEventListener("storage",e),e(),function(){return window.removeEventListener("storage",e)}}),[r]),(0,k.jsx)(f.Z,{bg:"dark","data-bs-theme":"dark",expand:"lg",children:(0,k.jsxs)(p.Z,{children:[(0,k.jsxs)(f.Z.Brand,{href:"/",children:[(0,k.jsx)(b,{}),(0,k.jsx)("h1",{className:"caveat-font",children:"What a Duck!"})]}),(0,k.jsx)(f.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,k.jsxs)(f.Z.Collapse,{id:"basic-navbar-nav",children:[(0,k.jsxs)(m.Z,{className:"me-auto",children:[(0,k.jsx)(m.Z.Link,{href:"/about-us",children:"Quienes somos"}),(0,k.jsx)(m.Z.Link,{href:"/adverts",children:"Anuncios"})]}),(0,k.jsx)(h.Z,{xs:"auto",className:"ms-auto",children:t?(0,k.jsx)(x.Z,{variant:"secondary",onClick:function(e,t){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("isVerified"),localStorage.removeItem("emailToken"),r(!1),n("/")},style:{marginBottom:"5px"},children:"Logout"}):(0,k.jsx)(C.rU,{to:"/login",children:(0,k.jsx)(x.Z,{variant:"secondary",children:"Registrarte o Iniciar sesi\xf3n"})})})]})]})})},S=function(e){var t=e.title,r=e.children;return(0,k.jsxs)("div",{className:"d-flex flex-column",style:{minHeight:"100vh"},children:[(0,k.jsx)(T,{}),(0,k.jsxs)(p.Z,{className:"flex-fill",children:[(0,k.jsx)("h2",{className:"my-5",children:t}),r]}),(0,k.jsx)("footer",{className:"text-center py-3 bg-light",children:"\xa9 2023 Mighty Ducks Keepcoding Team"})]})}},470:function(e,t,r){var n=r(2791),a=r(7689),s=r(4849),o=r(184);t.Z=function(e){var t=e.delay,r=void 0===t?2e3:t,i=(0,a.s0)();return(0,n.useEffect)((function(){var e=setTimeout((function(){i("/")}),r);return function(){return clearTimeout(e)}}),[i,r]),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,o.jsx)(s.Z,{animation:"border",role:"status"})})}},6135:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(4165),a=r(5861),s=r(9439),o=r(2791),i=r(7022),c=r(9743),l=r(2677),u=r(2469),d=r(5945),p=r(470),f=r(5316),m=r(3360),h=r(184),x=function(e){var t=e.showModal,r=e.handleCancel,n=e.handleConfirm;return(0,h.jsxs)(f.Z,{show:t,onHide:r,children:[(0,h.jsx)(f.Z.Header,{closeButton:!0,children:(0,h.jsx)(f.Z.Title,{children:"Confirmar"})}),(0,h.jsx)(f.Z.Body,{children:"\xbfEst\xe1s seguro de que deseas crear el anuncio?"}),(0,h.jsxs)(f.Z.Footer,{children:[(0,h.jsx)(m.Z,{variant:"secondary",onClick:r,children:"Cancelar"}),(0,h.jsx)(m.Z,{variant:"dark",onClick:n,children:"Aceptar"})]})]})},g=r(3855),v=function(e){var t=e.handleSubmit,r=e.name,n=e.setName,a=e.formErrors,s=e.price,o=e.setPrice,i=e.description,c=e.setDescription,l=e.type,u=e.setType,d=e.tags,p=e.setTags,f=e.setPhoto;return(0,h.jsxs)(g.Z,{onSubmit:t,encType:"multipart/form-data",children:[(0,h.jsxs)(g.Z.Group,{controlId:"formName",children:[(0,h.jsx)(g.Z.Label,{children:"T\xedtulo"}),(0,h.jsx)(g.Z.Control,{type:"text",placeholder:"Escribe el t\xedtulo",value:r,onChange:function(e){return n(e.target.value)}}),a.name&&(0,h.jsx)(g.Z.Text,{className:"text-danger",children:a.name})]}),(0,h.jsxs)(g.Z.Group,{controlId:"formPrice",children:[(0,h.jsx)(g.Z.Label,{children:"Precio"}),(0,h.jsx)(g.Z.Control,{type:"number",placeholder:"Escribe el precio",value:s,onChange:function(e){return o(e.target.value)}}),a.price&&(0,h.jsx)(g.Z.Text,{className:"text-danger",children:a.price})]}),(0,h.jsxs)(g.Z.Group,{controlId:"formDescription",children:[(0,h.jsx)(g.Z.Label,{children:"Descripci\xf3n"}),(0,h.jsx)(g.Z.Control,{as:"textarea",rows:3,placeholder:"Escribe la descripci\xf3n",value:i,onChange:function(e){return c(e.target.value)}}),a.description&&(0,h.jsx)(g.Z.Text,{className:"text-danger",children:a.description})]}),(0,h.jsxs)(g.Z.Group,{controlId:"formType",children:[(0,h.jsx)(g.Z.Label,{children:"Tipo"}),(0,h.jsxs)(g.Z.Control,{as:"select",value:l,onChange:function(e){return u(e.target.value)},children:[(0,h.jsx)("option",{value:"compra",children:"Compra"}),(0,h.jsx)("option",{value:"venta",children:"Venta"})]})]}),(0,h.jsxs)(g.Z.Group,{controlId:"formTags",children:[(0,h.jsx)(g.Z.Label,{children:"Etiquetas (separadas por comas)"}),(0,h.jsx)(g.Z.Control,{type:"text",placeholder:"Ejemplo: etiqueta1, etiqueta2",value:d,onChange:function(e){return p(e.target.value)}}),a.tags&&(0,h.jsx)(g.Z.Text,{className:"text-danger",children:a.tags})]}),(0,h.jsxs)(g.Z.Group,{controlId:"formPhoto",children:[(0,h.jsx)(g.Z.Label,{children:"Foto"}),(0,h.jsx)(g.Z.Control,{type:"file",accept:".jpg, .jpeg, .png, .pdf, .doc, .docx",name:"photo",onChange:function(e){return f(e.target.files[0])}})]}),(0,h.jsx)(m.Z,{variant:"dark",type:"submit",className:"mt-3",children:"Crear"})]})},Z=r(7051);var j=function(){var e=(0,o.useState)(!1),t=(0,s.Z)(e,2),f=t[0],m=t[1],g=function(){var e=(0,o.useState)(""),t=(0,s.Z)(e,2),r=t[0],n=t[1],a=(0,o.useState)(""),i=(0,s.Z)(a,2),c=i[0],l=i[1],u=(0,o.useState)(""),d=(0,s.Z)(u,2),p=d[0],f=d[1],m=(0,o.useState)("compra"),h=(0,s.Z)(m,2),x=h[0],g=h[1],v=(0,o.useState)(""),Z=(0,s.Z)(v,2),j=Z[0],y=Z[1],b=(0,o.useState)(""),E=(0,s.Z)(b,2);return{name:r,setName:n,price:c,setPrice:l,description:p,setDescription:f,type:x,setType:g,tags:j,setTags:y,photo:E[0],setPhoto:E[1]}}(),j=g.name,y=g.setName,b=g.price,E=g.setPrice,C=g.description,w=g.setDescription,k=g.type,T=g.setType,S=g.tags,I=g.setTags,N=g.photo,O=g.setPhoto,L=r(4224),P=L.get("user-name"),D=L.get("email-user"),G=function(e,t,r,n){var a=(0,o.useState)({}),i=(0,s.Z)(a,2),c=i[0],l=i[1];return{formErrors:c,validateForm:function(){var a={};return e||(a.name="El t\xedtulo es obligatorio"),t||(a.description="La descripci\xf3n es obligatoria"),r||(a.price="El precio es obligatorio"),n||(a.tags="Las etiquetas son obligatorias"),l(a),0===Object.keys(a).length}}}(j,C,b,S),A=G.formErrors,U=G.validateForm,F=function(){var e=(0,o.useState)(""),t=(0,s.Z)(e,2),r=t[0],i=t[1],c=(0,o.useState)(""),l=(0,s.Z)(c,2),u=l[0],d=l[1],p=(0,o.useState)(!1),f=(0,s.Z)(p,2),m=f[0],h=f[1],x=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.Vl)(t,r);case 3:i("Anuncio creado con \xe9xito"),d(""),setTimeout((function(){h(!0)}),2e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d("Error al crear el anuncio. Por favor, int\xe9ntalo de nuevo."),i("");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}();return{postAd:x,successMessage:r,errorMessage:u,redirectToHome:m}}(),M=F.postAd,B=F.successMessage,q=F.errorMessage,z=F.redirectToHome,H=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!1),t={name:j,price:parseFloat(b),description:C,type:k,tags:S.split(",").map((function(e){return e.trim()})),photo:N,senderEmail:D,username:P},r=localStorage.getItem("token"),e.next=5,M(t,r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(d.Z,{title:"Crear Anuncio",children:(0,h.jsx)(i.Z,{className:"mb-5",children:(0,h.jsx)(c.Z,{className:"justify-content-md-center",children:(0,h.jsx)(l.Z,{md:"6",children:z?(0,h.jsx)(p.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{showModal:f,handleCancel:function(){m(!1)},handleConfirm:H}),B&&(0,h.jsx)(u.Z,{variant:"success",children:B}),q&&(0,h.jsx)(u.Z,{variant:"danger",children:q}),(0,h.jsx)(v,{formErrors:A,handleSubmit:function(e){e.preventDefault(),U()&&m(!0)},name:j,setName:y,price:b,setPrice:E,description:C,setDescription:w,type:k,setType:T,tags:S,setTags:I,photo:N,setPhoto:O,username:P,senderEmail:D})]})})})})})}},7051:function(e,t,r){r.d(t,{K4:function(){return o},K5:function(){return l},VO:function(){return s},Vl:function(){return i},vk:function(){return c}});var n=r(3965),a="/api/adverts",s=function(){return n.Z.get(a)},o=function(e){var t="".concat(a,"/").concat(e);return n.Z.get(t)},i=function(e,t){var r=new FormData;return r.append("name",e.name),r.append("price",e.price),r.append("description",e.description),r.append("type",e.type),r.append("tags",e.tags),r.append("photo",e.photo),r.append("username",e.username),r.append("senderEmail",e.senderEmail),n.Z.post("".concat(a,"/create-advert"),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)},withCredentials:!0})},c=function(e,t){var r="".concat(a,"/edit/").concat(e);return n.Z.put(r,t)},l=function(e){var t="".concat(a,"/").concat(e);return n.Z.delete(t)}}}]);
//# sourceMappingURL=135.ce0aea9c.chunk.js.map